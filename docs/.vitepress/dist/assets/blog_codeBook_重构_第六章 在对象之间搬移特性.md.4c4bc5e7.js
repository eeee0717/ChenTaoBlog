import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.a6386e6f.js";const p="/ChenTaoBlog/assets/Image.693df910.png",o="/ChenTaoBlog/assets/Image(2).b23cf2ad.png",e="/ChenTaoBlog/assets/Image(3).a676667b.png",r="/ChenTaoBlog/assets/Image(4).573e26ac.png",h=JSON.parse('{"title":"第六章 在对象之间搬移特性","description":"","frontmatter":{},"headers":[],"relativePath":"blog/codeBook/重构/第六章 在对象之间搬移特性.md","filePath":"blog/codeBook/重构/第六章 在对象之间搬移特性.md","lastUpdated":1698394224000}'),t={name:"blog/codeBook/重构/第六章 在对象之间搬移特性.md"},c=l(`<h1 id="第六章-在对象之间搬移特性" tabindex="-1">第六章 在对象之间搬移特性 <a class="header-anchor" href="#第六章-在对象之间搬移特性" aria-label="Permalink to &quot;第六章 在对象之间搬移特性&quot;">​</a></h1><h2 id="搬移函数" tabindex="-1">搬移函数 <a class="header-anchor" href="#搬移函数" aria-label="Permalink to &quot;搬移函数&quot;">​</a></h2><p>如果一个class有太多行为，或者一个class与另一个class有太多合作而形成高度耦合，则需要搬移函数。</p><div class="language-cs vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cs</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Account</span><span style="color:#E1E4E8;">...</span></span>
<span class="line"><span style="color:#E1E4E8;">double overdraftCharge() { </span><span style="color:#6A737D;">//译注：透支金计费，它和其他class的关系似乎比较密切。</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">if</span><span style="color:#E1E4E8;"> (_type.isPremium()) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">result</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (_daysOverdrawn </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">7</span><span style="color:#E1E4E8;">) result </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> (_daysOverdrawn </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">7</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0.85</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> result;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  else return _daysOverdrawn * 1.75;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Account</span><span style="color:#24292E;">...</span></span>
<span class="line"><span style="color:#24292E;">double overdraftCharge() { </span><span style="color:#6A737D;">//译注：透支金计费，它和其他class的关系似乎比较密切。</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">if</span><span style="color:#24292E;"> (_type.isPremium()) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">result</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (_daysOverdrawn </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">7</span><span style="color:#24292E;">) result </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> (_daysOverdrawn </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">7</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0.85</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> result;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  else return _daysOverdrawn * 1.75;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>=&gt;</p><div class="language-cs vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cs</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">AccountType</span><span style="color:#E1E4E8;">...</span></span>
<span class="line"><span style="color:#E1E4E8;">double overdraftCharge(</span><span style="color:#B392F0;">Account</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">account</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">if</span><span style="color:#E1E4E8;"> (isPremium()) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">result</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (account.</span><span style="color:#B392F0;">getDaysOverdrawn</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">7</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      result </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> (account.</span><span style="color:#B392F0;">getDaysOverdrawn</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">7</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0.85</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> result;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  else </span><span style="color:#B392F0;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">account</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">getDaysOverdrawn</span><span style="color:#E1E4E8;">() * 1.75;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">AccountType</span><span style="color:#24292E;">...</span></span>
<span class="line"><span style="color:#24292E;">double overdraftCharge(</span><span style="color:#6F42C1;">Account</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">account</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">if</span><span style="color:#24292E;"> (isPremium()) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">result</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (account.</span><span style="color:#6F42C1;">getDaysOverdrawn</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">7</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      result </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> (account.</span><span style="color:#6F42C1;">getDaysOverdrawn</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">7</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0.85</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> result;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  else </span><span style="color:#6F42C1;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">account</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">getDaysOverdrawn</span><span style="color:#24292E;">() * 1.75;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="搬移值域" tabindex="-1">搬移值域 <a class="header-anchor" href="#搬移值域" aria-label="Permalink to &quot;搬移值域&quot;">​</a></h2><p>如果一个class的值域有另外一个class频繁的使用，则需要搬移值域。</p><div class="language-cs vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cs</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Account</span><span style="color:#E1E4E8;">...</span></span>
<span class="line"><span style="color:#E1E4E8;">  private AccountType _type;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">_interestRate</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">interestForAmount_days</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">amount</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">days</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> _interestRate </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> amount </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> days </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">365</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Account</span><span style="color:#24292E;">...</span></span>
<span class="line"><span style="color:#24292E;">  private AccountType _type;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">_interestRate</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">interestForAmount_days</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">amount</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">days</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> _interestRate </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> amount </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> days </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">365</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>=&gt;</p><div class="language-cs vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cs</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Account</span><span style="color:#E1E4E8;">... 添加get set方法</span></span>
<span class="line"><span style="color:#E1E4E8;">double interestForAmountAndDays (</span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">amount</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">days</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getInterestRate</span><span style="color:#E1E4E8;">() * amount * days / 365;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setInterestRate</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">arg</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  _type.</span><span style="color:#B392F0;">setInterestRate</span><span style="color:#E1E4E8;">(arg);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">double</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getInterestRate</span><span style="color:#E1E4E8;"> () {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> _type.</span><span style="color:#B392F0;">getInterestRate</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Account</span><span style="color:#24292E;">... 添加get set方法</span></span>
<span class="line"><span style="color:#24292E;">double interestForAmountAndDays (</span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">amount</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">days</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getInterestRate</span><span style="color:#24292E;">() * amount * days / 365;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setInterestRate</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">arg</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  _type.</span><span style="color:#6F42C1;">setInterestRate</span><span style="color:#24292E;">(arg);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getInterestRate</span><span style="color:#24292E;"> () {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> _type.</span><span style="color:#6F42C1;">getInterestRate</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="提炼类" tabindex="-1">提炼类 <a class="header-anchor" href="#提炼类" aria-label="Permalink to &quot;提炼类&quot;">​</a></h2><p>如果一个class做了应该由两个class做的事，则需要提炼。</p><p><img src="`+p+'" alt="Image.png"></p><h2 id="将类内联化" tabindex="-1">将类内联化 <a class="header-anchor" href="#将类内联化" aria-label="Permalink to &quot;将类内联化&quot;">​</a></h2><p>某个类没有做太多的事情，把这个类的所有特性搬到另一个类中。</p><p><img src="'+o+'" alt="Image.png"></p><h2 id="隐藏「委托关系」" tabindex="-1">隐藏「委托关系」 <a class="header-anchor" href="#隐藏「委托关系」" aria-label="Permalink to &quot;隐藏「委托关系」&quot;">​</a></h2><p>在server端建立客户所需的所有函数，用于隐藏委托关系</p><p><img src="'+e+`" alt="Image.png"></p><h2 id="移除中间人" tabindex="-1">移除中间人 <a class="header-anchor" href="#移除中间人" aria-label="Permalink to &quot;移除中间人&quot;">​</a></h2><p>某个class做了过多的简单委托动作</p><p>让客户直接调用delegate</p><div class="language-cs vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cs</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Person</span><span style="color:#E1E4E8;">...</span></span>
<span class="line"><span style="color:#E1E4E8;">  Department _department;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Person</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getManager</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> _department.</span><span style="color:#B392F0;">getManager</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Department</span><span style="color:#E1E4E8;">...</span></span>
<span class="line"><span style="color:#E1E4E8;">  private Person _manager;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">public</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Department</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">Person</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">manager</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    _manager </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> manager;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">manager </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> john.</span><span style="color:#B392F0;">getManager</span><span style="color:#E1E4E8;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Person</span><span style="color:#24292E;">...</span></span>
<span class="line"><span style="color:#24292E;">  Department _department;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Person</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getManager</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> _department.</span><span style="color:#6F42C1;">getManager</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Department</span><span style="color:#24292E;">...</span></span>
<span class="line"><span style="color:#24292E;">  private Person _manager;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Department</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">Person</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">manager</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    _manager </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> manager;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">manager </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> john.</span><span style="color:#6F42C1;">getManager</span><span style="color:#24292E;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>=&gt;</p><div class="language-cs vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cs</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Person</span><span style="color:#E1E4E8;">...</span></span>
<span class="line"><span style="color:#E1E4E8;">public Department getDepartment() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">_department</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">manager </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> john.</span><span style="color:#B392F0;">getDepartment</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">getManager</span><span style="color:#E1E4E8;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Person</span><span style="color:#24292E;">...</span></span>
<span class="line"><span style="color:#24292E;">public Department getDepartment() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">_department</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">manager </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> john.</span><span style="color:#6F42C1;">getDepartment</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">getManager</span><span style="color:#24292E;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="引入外加函数" tabindex="-1">引入外加函数 <a class="header-anchor" href="#引入外加函数" aria-label="Permalink to &quot;引入外加函数&quot;">​</a></h2><p>使用的api中不存在该函数，但你无法修改源代码。</p><div class="language-cs vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cs</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Date</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">newStart</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Date</span><span style="color:#E1E4E8;"> (previousEnd.</span><span style="color:#B392F0;">getYear</span><span style="color:#E1E4E8;">(),</span></span>
<span class="line"><span style="color:#E1E4E8;">                      previousEnd.</span><span style="color:#B392F0;">getMonth</span><span style="color:#E1E4E8;">(), previousEnd.</span><span style="color:#B392F0;">getDate</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Date</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">newStart</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Date</span><span style="color:#24292E;"> (previousEnd.</span><span style="color:#6F42C1;">getYear</span><span style="color:#24292E;">(),</span></span>
<span class="line"><span style="color:#24292E;">                      previousEnd.</span><span style="color:#6F42C1;">getMonth</span><span style="color:#24292E;">(), previousEnd.</span><span style="color:#6F42C1;">getDate</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>=&gt;</p><div class="language-cs vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cs</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Date</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">newStart</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">nextDay</span><span style="color:#E1E4E8;">(previousEnd);</span></span>
<span class="line"><span style="color:#F97583;">private</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">static</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Date</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">nextDay</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">Date</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">arg</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#6A737D;">// foreign method, should be on date</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Date</span><span style="color:#E1E4E8;"> (arg.</span><span style="color:#B392F0;">getYear</span><span style="color:#E1E4E8;">(),arg.</span><span style="color:#B392F0;">getMonth</span><span style="color:#E1E4E8;">(), arg.</span><span style="color:#B392F0;">getDate</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Date</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">newStart</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">nextDay</span><span style="color:#24292E;">(previousEnd);</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Date</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">nextDay</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">Date</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">arg</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#6A737D;">// foreign method, should be on date</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Date</span><span style="color:#24292E;"> (arg.</span><span style="color:#6F42C1;">getYear</span><span style="color:#24292E;">(),arg.</span><span style="color:#6F42C1;">getMonth</span><span style="color:#24292E;">(), arg.</span><span style="color:#6F42C1;">getDate</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="引入本地扩展" tabindex="-1">引入本地扩展 <a class="header-anchor" href="#引入本地扩展" aria-label="Permalink to &quot;引入本地扩展&quot;">​</a></h2><p><img src="`+r+'" alt="Image.png"></p>',33),E=[c];function y(i,d,u,b,F,m){return a(),n("div",null,E)}const C=s(t,[["render",y]]);export{h as __pageData,C as default};
